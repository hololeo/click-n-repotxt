javascript:(function(){function convertGithubUrl(){const url=document.location.href;if(!url||!url.includes("github.com")){console.error("The current page is not a GitHub URL.");return null;}const regex=/github.com\/(.*?\/tree\/(main|master))?(.*)/;const match=url.match(regex);if(!match){console.error("Could not parse the GitHub URL.");return null;}const repoPath=match[1]||'';const remainingPath=match[3]||'';const newUrl=`https://uithub.com/${repoPath}${remainingPath}?accept=text%2Fplain&maxTokens=10000000`;return newUrl;}function initializePageHandler(){const currentUrl=document.location.href;if(currentUrl.includes("github.com")){const newFormattedUrl=convertGithubUrl();if(newFormattedUrl){console.log("Redirecting to:",newFormattedUrl);window.location.href=newFormattedUrl;}}else if(currentUrl.includes("uithub.com")){addControlButtons();}}function addControlButtons(){const pageText=document.body.innerText||document.body.textContent||'';const overlay=document.createElement('div');overlay.style.cssText=`position: fixed;top: 20px;right: 20px;z-index: 10000;background: #ffffff;border: 2px solid #333;border-radius: 8px;padding: 15px;box-shadow: 0 4px 12px rgba(0,0,0,0.3);font-family: Arial, sans-serif;`;const downloadBtn=document.createElement('button');downloadBtn.textContent='Download';downloadBtn.style.cssText=`background: #007cba;color: white;border: none;padding: 10px 20px;margin-right: 10px;border-radius: 4px;cursor: pointer;font-size: 14px;`;downloadBtn.onclick=()=>downloadText(pageText);const copyBtn=document.createElement('button');copyBtn.textContent='Copy';copyBtn.style.cssText=`background: #28a745;color: white;border: none;padding: 10px 20px;border-radius: 4px;cursor: pointer;font-size: 14px;`;copyBtn.onclick=()=>copyToClipboard(pageText,copyBtn);overlay.appendChild(downloadBtn);overlay.appendChild(copyBtn);document.body.appendChild(overlay);console.log('Control buttons added. Text length:',pageText.length);}function downloadText(text){const currentUrl=document.location.href;const pathParts=currentUrl.split('/');const lastPart=pathParts[pathParts.length-1].split('?')[0];const filename=lastPart?`${lastPart}.txt`:'github-content.txt';const blob=new Blob([text],{type:'text/plain'});const url=URL.createObjectURL(blob);const link=document.createElement('a');link.href=url;link.download=filename;document.body.appendChild(link);link.click();document.body.removeChild(link);URL.revokeObjectURL(url);console.log('Download triggered with filename:',filename);}function copyToClipboard(text,button){navigator.clipboard.writeText(text).then(()=>{const originalText=button.textContent;button.textContent='Copied!';button.style.background='#6c757d';setTimeout(()=>{button.textContent=originalText;button.style.background='#28a745';},2000);console.log('Text copied to clipboard');}).catch(err=>{console.error('Failed to copy text: ',err);});}if(document.readyState==='loading'){document.addEventListener('DOMContentLoaded',initializePageHandler);}else{initializePageHandler();}})();
